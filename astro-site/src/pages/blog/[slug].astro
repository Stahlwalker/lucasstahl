---
import Layout from '../../layouts/Layout.astro';
import { getBlogPosts, getBlogPostBySlug } from '../../lib/notion';
import { marked } from 'marked';
import { codeToHtml } from 'shiki';

export async function getStaticPaths() {
  const posts = await getBlogPosts();
  const filteredPosts = posts.filter(post => post.slug && post.slug.trim() !== '');
  return filteredPosts.map(post => ({
    params: { slug: post.slug },
  }));
}

const { slug } = Astro.params;
const post = await getBlogPostBySlug(slug);

if (!post) {
  return Astro.redirect('/404');
}

// Configure marked to use Shiki - we'll handle wrapping ourselves
const renderer = new marked.Renderer();
const originalCodeRenderer = renderer.code.bind(renderer);

renderer.code = async function(this: any, code: string, language: string | undefined, isEscaped: boolean) {
  if (!language) {
    return originalCodeRenderer.call(this, code, language, isEscaped);
  }

  try {
    const html = await codeToHtml(code, {
      lang: language,
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      }
    });
    return html;
  } catch (error) {
    console.error('Shiki highlighting error:', error);
    return originalCodeRenderer.call(this, code, language, isEscaped);
  }
};

marked.setOptions({
  async: true,
  renderer: renderer
});

// Convert markdown to HTML with syntax highlighting
const htmlContent = post.content ? await marked(post.content) : '';

// Determine OG image with fallback logic and ensure absolute URL
let ogImageUrl = post.ogImage || '/assets/images/Hero_OG.png';
// Convert relative paths to absolute URLs for social media
if (ogImageUrl.startsWith('/')) {
  ogImageUrl = `https://lukestahl.io${ogImageUrl}`;
}
const metaTitle = post.metaTitle || post.title;
const metaDesc = post.metaDescription || post.excerpt;

// Get all posts for "Continue Reading" suggestion (including external posts)
const notionPosts = await getBlogPosts();

// Define external blog posts (matching /blog page)
const externalPosts = [
  {
    title: "Developers love headless until they're stuck maintaining it",
    publishedDate: "2025-10-08",
    url: "https://webflow.com/blog/headless-cms-developer-tradeoffs",
    isExternal: true,
  },
  {
    title: "MCP servers worth knowing if you're building with AI",
    publishedDate: "2025-08-13",
    url: "https://webflow.com/blog/ai-mcp-servers",
    isExternal: true,
  },
  {
    title: "AI APIs in 2025",
    publishedDate: "2025-02-27",
    url: "https://www.builder.io/blog/ai-apis",
    isExternal: true,
  },
  {
    title: "The Rise of Visual Editing in Headless CMSs",
    publishedDate: "2025-02-05",
    url: "https://www.builder.io/m/knowledge-center/visual-editing",
    isExternal: true,
  },
  {
    title: "Building High-Performance React Components with AI Assistance",
    publishedDate: "2025-01-29",
    url: "https://www.builder.io/blog/react-components-ai",
    isExternal: true,
  },
  {
    title: "A Guide to Server-Side Rendering",
    publishedDate: "2025-01-09",
    url: "https://www.builder.io/m/explainers/server-side-rendering",
    isExternal: true,
  },
  {
    title: "React UI Component Libraries in 2025",
    publishedDate: "2025-01-06",
    url: "https://www.builder.io/blog/react-component-library",
    isExternal: true,
  },
  {
    title: "What is Builder's Visual Development Platform?",
    publishedDate: "2024-12-13",
    url: "https://www.builder.io/m/explainers/visual-development-platform",
    isExternal: true,
  },
  {
    title: "Headless Commerce - A Guide to Decoupled E-Commerce",
    publishedDate: "2024-11-20",
    url: "https://www.builder.io/m/knowledge-center/headless-commerce",
    isExternal: true,
  },
  {
    title: "What is Design to Code: an Automated Approach",
    publishedDate: "2024-11-05",
    url: "https://www.builder.io/m/knowledge-center/design-to-code",
    isExternal: true,
  },
  {
    title: "Design Systems Explained",
    publishedDate: "2024-10-18",
    url: "https://www.builder.io/m/explainers/design-systems",
    isExternal: true,
  },
  {
    title: "A Helpful Approach to Navigating the SEO AI Shift",
    publishedDate: "2024-10-03",
    url: "https://www.builder.io/blog/seo-ai",
    isExternal: true,
  },
  {
    title: "Figma Plugins for Developers in 2024",
    publishedDate: "2024-09-18",
    url: "https://www.builder.io/blog/best-figma-plugins",
    isExternal: true,
  },
  {
    title: "Extensibility: Building software that adapts",
    publishedDate: "2024-09-09",
    url: "https://www.builder.io/m/explainers/extensibility",
    isExternal: true,
  },
  {
    title: "Digital Asset Management: Organize your digital world",
    publishedDate: "2024-08-22",
    url: "https://www.builder.io/m/explainers/digital-asset-management",
    isExternal: true,
  },
  {
    title: "An SEO aha moment: understanding Core Web Vitals",
    publishedDate: "2024-07-26",
    url: "https://www.builder.io/m/explainers/seo-core-web-vitals",
    isExternal: true,
  },
  {
    title: "Structured Data: What It Is and Why You Need It",
    publishedDate: "2024-07-15",
    url: "https://www.builder.io/m/explainers/structured-data",
    isExternal: true,
  },
  {
    title: "Visual Content Modeling: A Comprehensive Guide",
    publishedDate: "2024-07-02",
    url: "https://www.builder.io/m/explainers/content-modeling",
    isExternal: true,
  },
  {
    title: "The Complete Guide to Choosing the Best Jamstack CMS",
    publishedDate: "2024-02-01",
    url: "https://www.builder.io/m/knowledge-center/jamstack-cms",
    isExternal: true,
  },
  {
    title: "Trusting ChatGPT - Protecting Apps from PII Leakage",
    publishedDate: "2023-08-09",
    url: "https://dev.to/pangea/trusting-chatgpt-protecting-apps-from-pii-leakage-1727",
    isExternal: true,
  },
  {
    title: "Integrating with Firebase and Pangea's security services",
    publishedDate: "2023-02-14",
    url: "https://dev.to/pangea/integrating-with-firebase-with-pangeas-security-services-5g4e",
    isExternal: true,
  },
  {
    title: "Integrating Pangea Audit and Embargo APIs with RedwoodJS",
    publishedDate: "2022-10-24",
    url: "https://dev.to/pangea/integrating-pangea-audit-and-embargo-with-redwoodjs-4i8m",
    isExternal: true,
  },
  {
    title: "Ruby on Rails tutorial: Getting started with Contentful",
    publishedDate: "2022-09-08",
    url: "https://www.contentful.com/blog/ruby-on-rails-tutorial/",
    isExternal: true,
  },
  {
    title: "How to get started using Angular with Contentful",
    publishedDate: "2022-09-01",
    url: "https://www.contentful.com/blog/how-to-get-started-using-angular-with-contentful/",
    isExternal: true,
  },
  {
    title: "A hands-on tutorial for using Contentful with Vue",
    publishedDate: "2022-08-18",
    url: "https://www.contentful.com/blog/vue-tutorial/",
    isExternal: true,
  },
  {
    title: "What is a framework in programming? All about software frameworks",
    publishedDate: "2022-08-16",
    url: "https://www.contentful.com/blog/what-is-a-framework/",
    isExternal: true,
  },
  {
    title: "A galactic guide to building a blog with Next.js and Contentful",
    publishedDate: "2022-03-24",
    url: "https://www.contentful.com/blog/building-blog-with-nextjs-and-contentful/",
    isExternal: true,
  },
];

// Combine Notion and external posts, exclude current post
const allPosts = [
  ...notionPosts.map(p => ({
    title: p.title,
    publishedDate: p.publishedDate,
    url: `/blog/${p.slug}/`,
    slug: p.slug,
    isExternal: false,
  })),
  ...externalPosts
].filter(p => !p.slug || p.slug !== post.slug);

// Sort by date descending and get the two most recent
allPosts.sort((a, b) => new Date(b.publishedDate).getTime() - new Date(a.publishedDate).getTime());
const suggestedPosts = allPosts.slice(0, 2);

// Hide announcement on the blog post it's promoting to avoid redundancy
const hideAnnouncement = post.slug === 'markdown-vs-cms';
---

<Layout
  title={`${metaTitle} - Luke Stahl`}
  description={metaDesc}
  canonicalUrl={`https://lukestahl.io/blog/${post.slug}/`}
  ogTitle={metaTitle}
  ogDescription={metaDesc}
  ogImage={ogImageUrl}
  showAnnouncement={!hideAnnouncement}
>
  <!-- JSON-LD Structured Data - BlogPosting Schema -->
  <script slot="head" type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": post.title,
    "description": metaDesc,
    "image": ogImageUrl,
    "datePublished": post.publishedDate,
    "dateModified": post.publishedDate,
    "author": {
      "@type": "Person",
      "name": "Luke Stahl",
      "url": "https://lukestahl.io/"
    },
    "publisher": {
      "@type": "Person",
      "name": "Luke Stahl",
      "url": "https://lukestahl.io/"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": `https://lukestahl.io/blog/${post.slug}/`
    },
    "wordCount": post.readingTime ? post.readingTime * 200 : undefined,
    "keywords": post.tags.join(", ")
  })} />

  <!-- JSON-LD Structured Data - Breadcrumb Schema -->
  <script slot="head" type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://lukestahl.io/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Blog",
        "item": "https://lukestahl.io/blog/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": post.title,
        "item": `https://lukestahl.io/blog/${post.slug}/`
      }
    ]
  })} />

  <article class="blog-post">
    <div class="blog-post-container">
      <nav class="breadcrumbs" aria-label="Breadcrumb">
        <ol class="breadcrumb-list">
          <li class="breadcrumb-item">
            <a href="/" class="breadcrumb-link">Home</a>
          </li>
          <li class="breadcrumb-separator">/</li>
          <li class="breadcrumb-item">
            <a href="/blog/" class="breadcrumb-link">Blog</a>
          </li>
          <li class="breadcrumb-separator">/</li>
          <li class="breadcrumb-item breadcrumb-current" aria-current="page">
            <span>{post.title}</span>
          </li>
        </ol>
      </nav>

      <header class="blog-post-header">
        <div class="header-background">
          <div class="abstract-shape shape-1"></div>
          <div class="abstract-shape shape-2"></div>
          <div class="abstract-shape shape-3"></div>
        </div>
        <div class="header-content">
          {post.tags.length > 0 && (
            <div class="blog-post-tags">
              {post.tags.map(tag => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          )}
          <h1 class="blog-post-title">
            <span class="code-bracket">&lt;</span>
            {post.title}
            <span class="code-bracket">/&gt;</span>
          </h1>
          <div class="blog-post-meta">
            <time class="blog-post-date">
              {new Date(post.publishedDate).toLocaleDateString('en-US', {
                month: 'long',
                day: 'numeric',
                year: 'numeric'
              })}
            </time>
            {post.readingTime && (
              <>
                <span class="meta-divider">â€¢</span>
                <span class="reading-time">
                  <i class="fa-solid fa-clock"></i>
                  {post.readingTime} min read
                </span>
              </>
            )}
          </div>
        </div>
      </header>

      <div class="blog-post-content" set:html={htmlContent} />

      <!-- Giscus Comments -->
      <div class="comments-section">
        <script
          src="https://giscus.app/client.js"
          data-repo="Stahlwalker/lucasstahl"
          data-repo-id="R_kgDONhx3Gg"
          data-category="General"
          data-category-id="DIC_kwDONhx3Gs4ClYjJ"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="dark"
          data-lang="en"
          crossorigin="anonymous"
          async>
        </script>
      </div>

      <script is:inline>
        // Sync Giscus theme with site theme
        function setGiscusTheme() {
          const theme = document.documentElement.getAttribute('data-theme') || 'dark';
          const giscusTheme = theme === 'light' ? 'light' : 'dark';

          const iframe = document.querySelector('iframe.giscus-frame');
          if (iframe) {
            iframe.contentWindow.postMessage(
              { giscus: { setConfig: { theme: giscusTheme } } },
              'https://giscus.app'
            );
          }
        }

        // Wait for Giscus to load, then sync theme
        window.addEventListener('message', (event) => {
          if (event.origin === 'https://giscus.app') {
            setGiscusTheme();
          }
        });

        // Listen for theme changes and update Giscus
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (mutation.attributeName === 'data-theme') {
              setGiscusTheme();
            }
          });
        });

        observer.observe(document.documentElement, {
          attributes: true,
          attributeFilter: ['data-theme']
        });

        // Initial theme set
        setTimeout(setGiscusTheme, 1000);
      </script>

      <footer class="blog-post-footer">
        <div class="share-section">
          <h3 class="share-title">Share this article</h3>
          <div class="share-buttons">
            <a
              href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(metaTitle)}&url=${encodeURIComponent(`https://lukestahl.io/blog/${post.slug}/`)}`}
              target="_blank"
              rel="noopener noreferrer"
              class="share-button share-twitter"
              aria-label="Share on X (Twitter)"
            >
              <i class="fa-brands fa-x-twitter"></i>
            </a>
            <a
              href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(`https://lukestahl.io/blog/${post.slug}/`)}`}
              target="_blank"
              rel="noopener noreferrer"
              class="share-button share-linkedin"
              aria-label="Share on LinkedIn"
            >
              <i class="fa-brands fa-linkedin-in"></i>
            </a>
            <a
              href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(`https://lukestahl.io/blog/${post.slug}/`)}`}
              target="_blank"
              rel="noopener noreferrer"
              class="share-button share-facebook"
              aria-label="Share on Facebook"
            >
              <i class="fa-brands fa-facebook-f"></i>
            </a>
          </div>
        </div>

        {suggestedPosts.length > 0 && (
          <div class="continue-reading">
            <h3 class="continue-reading-title">Continue Reading</h3>
            <div class="suggested-posts-grid">
              {suggestedPosts.map(suggestedPost => (
                <a
                  href={suggestedPost.url}
                  class="suggested-post"
                  target={suggestedPost.isExternal ? "_blank" : undefined}
                  rel={suggestedPost.isExternal ? "noopener noreferrer" : undefined}
                >
                  <div class="suggested-post-content">
                    <h4 class="suggested-post-title">{suggestedPost.title}</h4>
                    <time class="suggested-post-date">
                      {new Date(suggestedPost.publishedDate).toLocaleDateString('en-US', {
                        month: 'short',
                        day: 'numeric',
                        year: 'numeric'
                      })}
                    </time>
                  </div>
                  <span class="suggested-post-arrow">
                    {suggestedPost.isExternal ? (
                      <i class="fa-solid fa-arrow-up-right-from-square"></i>
                    ) : (
                      <i class="fa-solid fa-arrow-right"></i>
                    )}
                  </span>
                </a>
              ))}
            </div>
          </div>
        )}
      </footer>
    </div>
  </article>

  <style>
    .blog-post {
      min-height: 100vh;
      padding: 4rem 2rem;
      background-color: var(--bg-primary, #0a0e27);
      background-image:
        linear-gradient(rgba(96, 165, 250, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(96, 165, 250, 0.03) 1px, transparent 1px);
      background-size: 50px 50px;
      background-position: center center;
    }

    .blog-post-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .breadcrumbs {
      margin-bottom: 2rem;
      font-family: 'Inter', sans-serif;
    }

    .breadcrumb-list {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 0.9rem;
    }

    .breadcrumb-item {
      display: flex;
      align-items: center;
    }

    .breadcrumb-link {
      color: var(--accent-blue, #60a5fa);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }

    .breadcrumb-link:hover {
      color: var(--accent-purple, #818cf8);
      text-decoration: underline;
    }

    .breadcrumb-separator {
      color: rgba(228, 228, 231, 0.4);
      user-select: none;
      font-weight: 300;
    }

    .breadcrumb-current span {
      color: rgba(228, 228, 231, 0.6);
      font-weight: 400;
      max-width: 400px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: inline-block;
    }

    .blog-post-header {
      position: relative;
      margin-bottom: 3rem;
      padding: 4rem 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      overflow: hidden;
      border-radius: 16px;
    }

    .header-background {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg,
        rgba(96, 165, 250, 0.1) 0%,
        rgba(129, 140, 248, 0.1) 50%,
        rgba(168, 85, 247, 0.1) 100%);
      animation: gradientShift 15s ease infinite;
      z-index: 0;
    }

    @keyframes gradientShift {
      0%, 100% {
        background: linear-gradient(135deg,
          rgba(96, 165, 250, 0.1) 0%,
          rgba(129, 140, 248, 0.1) 50%,
          rgba(168, 85, 247, 0.1) 100%);
      }
      50% {
        background: linear-gradient(135deg,
          rgba(168, 85, 247, 0.1) 0%,
          rgba(129, 140, 248, 0.1) 50%,
          rgba(96, 165, 250, 0.1) 100%);
      }
    }

    .abstract-shape {
      position: absolute;
      border-radius: 50%;
      opacity: 0.15;
      filter: blur(40px);
      animation: float 20s ease-in-out infinite;
    }

    .shape-1 {
      width: 300px;
      height: 300px;
      background: var(--accent-blue, #60a5fa);
      top: -100px;
      left: -100px;
      animation-delay: 0s;
    }

    .shape-2 {
      width: 250px;
      height: 250px;
      background: var(--accent-purple, #818cf8);
      top: 50%;
      right: -80px;
      animation-delay: -7s;
    }

    .shape-3 {
      width: 200px;
      height: 200px;
      background: rgba(168, 85, 247, 0.8);
      bottom: -50px;
      left: 50%;
      animation-delay: -14s;
    }

    @keyframes float {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(30px, -30px) scale(1.1);
      }
      66% {
        transform: translate(-20px, 20px) scale(0.9);
      }
    }

    .header-content {
      position: relative;
      z-index: 1;
    }

    .code-bracket {
      color: var(--accent-blue, #60a5fa);
      font-weight: 400;
      opacity: 0.7;
      font-size: 0.9em;
    }

    .blog-post-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .blog-post-title {
      font-size: 2.7rem;
      font-weight: 700;
      color: var(--text-primary, #e4e4e7);
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .blog-post-meta {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .blog-post-date {
      font-size: 0.9rem;
      color: rgba(228, 228, 231, 0.6);
    }

    .meta-divider {
      color: rgba(228, 228, 231, 0.4);
      font-size: 0.8rem;
    }

    .reading-time {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      color: rgba(228, 228, 231, 0.6);
    }

    .reading-time i {
      font-size: 0.85rem;
      color: var(--accent-blue, #60a5fa);
    }

    .blog-post-tags .tag {
      padding: 0.25rem 0.75rem;
      background-color: rgba(34, 211, 238, 0.15);
      border: 1px solid rgba(34, 211, 238, 0.5);
      border-radius: 4px;
      font-size: 0.75rem;
      color: #22d3ee;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
      text-shadow: 0 0 10px rgba(34, 211, 238, 0.3);
    }

    .blog-post-content {
      color: var(--text-primary, #e4e4e7);
      font-size: 1.1rem;
      line-height: 1.8;
      font-family: 'Inter', sans-serif;
    }

    .blog-post-content :global(h2) {
      font-size: 1.8rem;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      color: var(--text-primary, #e4e4e7);
    }

    .blog-post-content :global(h3) {
      font-size: 1.4rem;
      margin-top: 2rem;
      margin-bottom: 0.75rem;
      color: var(--text-primary, #e4e4e7);
    }

    .blog-post-content :global(p) {
      margin-bottom: 1.5rem;
    }

    .blog-post-content :global(a) {
      color: var(--accent-blue, #60a5fa);
      text-decoration: underline;
    }

    .blog-post-content :global(a:hover) {
      color: var(--accent-purple, #818cf8);
    }

    /* Inline code (not in pre blocks) */
    .blog-post-content :global(code:not(pre code)) {
      background-color: rgba(255, 255, 255, 0.05);
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Fira Code', monospace;
      font-size: 0.9em;
    }

    /* Code blocks - Shiki handles its own styling */
    .blog-post-content :global(pre) {
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1.5rem 0;
      font-family: 'Fira Code', monospace;
    }

    .blog-post-content :global(pre code) {
      background: none;
      padding: 0;
      font-family: 'Fira Code', monospace;
    }

    /* Shiki dual-theme support */
    .blog-post-content :global(pre[data-theme]) {
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    :global([data-theme="light"]) .blog-post-content :global(pre[data-theme]) {
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .blog-post-content :global(ul),
    .blog-post-content :global(ol) {
      margin-bottom: 1.5rem;
      padding-left: 2rem;
    }

    .blog-post-content :global(li) {
      margin-bottom: 0.5rem;
    }

    .blog-post-content :global(blockquote) {
      border-left: 4px solid var(--accent-blue, #60a5fa);
      padding-left: 1.5rem;
      margin: 1.5rem 0;
      font-style: italic;
      color: rgba(228, 228, 231, 0.8);
    }

    .blog-post-content :global(img) {
      width: 100%;
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin: 2rem 0;
      display: block;
    }

    .comments-section {
      margin-top: 4rem;
      padding-top: 3rem;
      border-top: 2px solid rgba(34, 211, 238, 0.3);
    }

    .blog-post-footer {
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 2px solid rgba(34, 211, 238, 0.3);
    }

    .share-section {
      margin-bottom: 2rem;
      text-align: center;
    }

    .share-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary, #e4e4e7);
      margin-bottom: 1rem;
      font-family: 'Inter', sans-serif;
    }

    .share-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      align-items: center;
    }

    .share-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-primary, #e4e4e7);
      text-decoration: none;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .share-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .share-twitter:hover {
      background-color: #1DA1F2;
      border-color: #1DA1F2;
      color: white;
    }

    .share-linkedin:hover {
      background-color: #0A66C2;
      border-color: #0A66C2;
      color: white;
    }

    .share-facebook:hover {
      background-color: #1877F2;
      border-color: #1877F2;
      color: white;
    }

    .continue-reading {
      margin: 3rem 0 2rem 0;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
    }

    .continue-reading-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary, #e4e4e7);
      margin-bottom: 1.5rem;
      font-family: 'Inter', sans-serif;
      text-align: center;
    }

    .suggested-posts-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }

    .suggested-post {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      text-decoration: none;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .suggested-post:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: var(--accent-blue, #60a5fa);
      transform: translateX(4px);
    }

    .suggested-post-content {
      flex: 1;
    }

    .suggested-post-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary, #e4e4e7);
      margin: 0 0 0.75rem 0;
      font-family: 'Inter', sans-serif;
      line-height: 1.3;
    }

    .suggested-post-date {
      font-size: 0.85rem;
      color: var(--accent-blue, #60a5fa);
    }

    .suggested-post-arrow {
      font-size: 1.5rem;
      color: var(--accent-blue, #60a5fa);
      transition: transform 0.3s ease;
    }

    .suggested-post:hover .suggested-post-arrow {
      transform: translateX(4px);
    }

    @media (max-width: 768px) {
      .blog-post {
        padding: 2rem 1rem;
      }

      .breadcrumb-list {
        font-size: 0.8rem;
        gap: 0.4rem;
      }

      .breadcrumb-current span {
        max-width: 200px;
      }

      .blog-post-title {
        font-size: 2rem;
      }

      .blog-post-content {
        font-size: 1rem;
      }

      .suggested-posts-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .suggested-post {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .suggested-post-arrow {
        align-self: flex-end;
      }
    }

    /* Light mode styles */
    :global([data-theme="light"]) .blog-post {
      background-color: var(--bg-secondary);
      background-image:
        linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
      background-size: 24px 24px;
      background-position: -1px -1px;
    }

    :global([data-theme="light"]) .breadcrumb-link {
      color: var(--accent-primary, #2563eb);
    }

    :global([data-theme="light"]) .breadcrumb-link:hover {
      color: #1d4ed8;
    }

    :global([data-theme="light"]) .breadcrumb-separator {
      color: rgba(24, 24, 27, 0.4);
    }

    :global([data-theme="light"]) .breadcrumb-current span {
      color: rgba(24, 24, 27, 0.7);
    }

    :global([data-theme="light"]) .continue-reading {
      background: rgba(255, 255, 255, 0.8);
      border: 2px solid rgba(0, 0, 0, 0.1);
    }

    :global([data-theme="light"]) .suggested-post {
      background: #ffffff;
      border: 1.5px solid rgba(0, 0, 0, 0.15);
    }

    :global([data-theme="light"]) .suggested-post:hover {
      background: rgba(37, 99, 235, 0.05);
      border-color: var(--accent-primary);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    :global([data-theme="light"]) .blog-post-footer {
      border-top: 2px solid rgba(0, 0, 0, 0.2);
    }

    :global([data-theme="light"]) .comments-section {
      border-top: 2px solid rgba(0, 0, 0, 0.2);
      background: rgba(255, 255, 255, 0.6);
      padding: 3rem 2rem;
      margin-top: 3rem;
      border-radius: 12px;
      border: 2px solid rgba(0, 0, 0, 0.1);
    }

    :global([data-theme="light"]) .blog-post-tags .tag {
      background-color: rgba(14, 165, 233, 0.15);
      border: 1.5px solid rgba(14, 165, 233, 0.5);
      color: #0284c7;
      text-shadow: none;
    }

    :global([data-theme="light"]) .blog-post-date,
    :global([data-theme="light"]) .reading-time {
      color: rgba(24, 24, 27, 0.7);
    }

    :global([data-theme="light"]) .meta-divider {
      color: rgba(24, 24, 27, 0.5);
    }

    :global([data-theme="light"]) .reading-time i {
      color: var(--accent-primary);
    }

    :global([data-theme="light"]) .comments-section {
      border-top: 2px solid rgba(0, 0, 0, 0.2);
    }

    :global([data-theme="light"]) .blog-post-content :global(blockquote) {
      border-left: 4px solid var(--accent-primary, #2563eb);
      background: rgba(37, 99, 235, 0.08);
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: var(--text-primary, #18181b);
      font-style: italic;
    }

    :global([data-theme="light"]) .blog-post-content :global(blockquote p) {
      color: var(--text-primary, #18181b);
      margin: 0;
    }

    /* Light mode inline code */
    :global([data-theme="light"]) .blog-post-content :global(code:not(pre code)) {
      background-color: rgba(0, 0, 0, 0.05);
      color: #18181b;
    }
  </style>
</Layout>
